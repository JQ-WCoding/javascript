<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>checkbox</title>
</head>
<body>
<div>
    <form action="">
  <span>
    <label for="checkAll"><input type="checkbox" onclick="" id="checkAll">check-all</label>
  </span>
        <span>
<input type="checkbox" id="apple" class="fruit"><label for="apple">apple</label>
  </span>
        <span>
 <input type="checkbox" id="banana" class="fruit"><label for="banana">banana</label>
  </span>
        <span>
 <input type="checkbox" id="grape" class="fruit"><label for="grape">grape</label>
  </span>
        <span>
<input type="checkbox" id="orange" class="fruit"><label for="orange">orange</label>
  </span>
    </form>
</div>
<script src="https://code.jquery.com/jquery-3.6.0.slim.min.js"
        integrity="sha256-u7e5khyithlIdTpu22PHhENmPcRdFiHRjhAuHcs05RI=" crossorigin="anonymous"></script>
<script>
    $(document).ready(function () {
        // checkAll 변경될때마다 실행되는 함수
        $('#checkAll').change(function () {
            // 과일 클래스 checked 의 여부를 확인하여 true false 값으로 변환해서 check 혹은 unchecked
            $('.fruit').prop('checked', $(this).prop('checked'));
        });
        // fruit checkbox 변경 여부도 확인 -> check all 의 checkbox checked / unchecked 로 변경해주기 위해
        $('.fruit').change(function () {
            // boolean 을 통해 구분
            let same = true;
            let boxes = document.getElementsByClassName('fruit');
            // fruit class 중 checked -> false 인 값이 있다면 전부 같지 않기에 false 로 초기화
            for (let i = 0; i < boxes.length; i++) {
                // ariaChecked 값을 확인하도록 한다
                if (!boxes[i].getAttribute('ariaChecked')){
                    same = false;
                    break;
                }
            }
            // check-all 체크박스를 unchecked 하기 위해 false 값 대입
            $('#checkAll').prop('checked', same);
        });
    });
</script>
</body>
</html>